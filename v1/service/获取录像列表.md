
### 简介：

当您使用的音视频功能时，还可以通过接口调用获取已转码的录像文件.该接口每分钟最多调用5次。

##### 根据时间获取录像文件列表：

POST 请求

示例为postman请求
```
curl -X POST \
  http(s)://vdn.anyrtc.cc/oauth/anyapi/v1/videoInfo/getVodListByTime \
  -H 'cache-control: no-cache' \
  -H 'content-type: application/json' \
  -d '{
	"appId":"anyrtcsdfqasdfsdfi",
	"random":"123456",
	"signature":"33d60e07681dfcc436422aab02e20261",
	"timestamp":1559557543000,
	"pageNum":2,
	"pageMax":5,
	"begTime":1558371600000,
	"endTime":1559149200000
}'
```

BODY参数：

| 编号 | 参数 | 名称 | 类型 | 说明 |
| --- | --- | --- | --- | --- |
| 1 | appId | 应用ID | int | 应用的ID,在用户后台获取 |
| 2 | random | 随机字符串 | int | 随机字符串,6-10位即可 |
| 3 | signature | 签名 | int | 请求的签名 |
| 3 | timestamp | 时间戳 | int | 当前毫秒时间戳 |
| 4 | begTime | 开始时间 | int | 查询开始时间的时间戳,毫秒 |
| 5 | endTime | 结束时间 | int | 查询结束时间的时间戳,毫秒 |
| 6 | pageNum | 当前页数 | int | 查询的当前页数 |
| 7 | pageMax | 每页最大列数 | int | 每页显示多少条 |


signature计算方式:
```
md5(appid+timestamp+vodtoken+random)
```
>appid,timestmap,vodtoken和random拼接字符串,顺序不能变,字符串中间没有‘+’号,然后进行md5计算.vodtoken在用户后台开通录像功能的地方获取.

返回值
```
{
    "requestid": 1559557594286,
    "code": 200,
    "message": "get video list success",
    "content": {
        "data": [
            {
                "filesize": 957271,
                "filestatus": 2,
                "filetype": "mp4",
                "upload_time": "2019-05-30T09:35:19.000Z",
                "upload_timestamp": 1559145600000,
                "download_url": "http://192.168.199.219:8080/anyrtc/6zDIxYEI6wYSQxjk6EdX.mp4",
                "start_time": 1559208681,
                "end_time": 1559208696,
                "file_duration": 15
            },
            {
                "filesize": 146,
                "filestatus": 2,
                "filetype": "mp4",
                "upload_time": "2019-05-30T02:39:32.000Z",
                "upload_timestamp": 1559145600000,
                "download_url": "http://192.168.199.219:8080/anyrtc/GLn8MWgGtfi2rLCZZTXo.mp4",
                "start_time": 1559183897,
                "end_time": 1559183960,
                "file_duration": 63
            },
        ],
        "cnt": {
            "cnt": 12
        }
    }
}
```
该返回值为josn类型字符串，需要json解析

| 名称 | 类型 | 说明 |
| --- | -- | --- |
| code | int | 200为成功,其他均为失败 |
| msg  | string |  接口返回说明 |
| conent | object | 接口返回内容 |

content说明:

data: 对象列表
cnt: 返回列表的数量

| 名称 | 类型 | 说明 |
| --- | --- | --- |
| filesize | int | 录像文件大小,单位 byte |
| filestatus  | int |  录像文件的状态, 0:未转码,1:转码中,2:转码成功,3:转码失败 |
| filetype | string | 录像文件的类型,默认mp4 |
| upload_time | string | 录像文件上传至服务器的时间 |
| upload_timestamp | int | 录像文件上传至服务器的时间, 单位秒,也是查询列表时判断的时间 |
| download_url | string |  录像文件下载/观看的路径 |
| start_time | int | 录像视频开始的时间,即通话开始的时间 |
| end_time | int | 录像视频结束的时间,即通话结束的时间 |
| file_duration | int | 通话的时长,单位秒 |


错误码

| code | 说明 |
| --- | --- | --- |
| 200 |  调用成功 |
| 400 |  缺少参数, 请查看参数名字拼写是否正确,类型是否正确 |
| 247 |  应用ID不存在 |
| 281 |  错误的签名, 请查看md5的变量顺序是否正确,每个变量的值是否正确 |
| 282 |  错误的时间戳, 请查看时间戳是否正确,毫秒时间 |
| 284 |  应用无效或已删除 |
| 299 |  接口调用频繁, 一分钟内最多5次 |
| 501 |  内部错误 |
